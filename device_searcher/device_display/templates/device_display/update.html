<!--@author wychengpublic-->

{% extends "device_display/home.html" %}
{% load staticfiles %}
{% block css %}
<link href="{% static 'display/self_defined/css/update.css' %}" rel="stylesheet">
{% endblock %}

{% block main_container %}
{% include "device_display/logo.html" %}
<ul class="nav nav-tabs">
    <li class="active"><a href="#panel_crawl" data-toggle="tab">网站爬取</a></li>
    <li><a href="#panel_upload" data-toggle="tab">文件上传</a></li>
    <li><a href="#panel_upd_rcd" data-toggle="tab">更新记录</a></li>
</ul>
<div class="tab-content">
    <div class="tab-pane in fade active" id="panel_crawl">
        {% include "device_display/update_crawl.html" %}
    </div>
    <div class="tab-pane active fade" id="panel_upload">
        {% include "device_display/update_upload.html" %}
    </div>
    <div class="tab-pane active fade" id="panel_upd_rcd">
        {% include "device_display/update_upd_rcd.html" %}
    </div>
</div>
<script>
    $(document).ready(
        function () {
            $("li.nav_li").attr("class", "nav_li");
            $("li#nav_update").addClass("active");

        }
    );

    function add_row_crawl(serial_num,website,cycle) {
        var tbody = $("div#panel_crawl table tbody");
        var row = $('<tr>' +
                        '<td>' + serial_num + '</td>' +
                        '<td>' + website + '</td>' +
                        '<td>' +
                            '<select class="selectpicker show-tick form-control" name="model"' +
                                    'data-width="98%" data-first-option="false" required>' +
                                '<option value="30">30天</option>' +
                                '<option value="90">90天</option>' +
                                '<option value="180">180天</option>' +
                                '<option value="365">365天</option>' +
                            '</select>' +
                        '</td>' +
                    '</tr>');

        row.find("select.selectpicker").selectpicker('val',cycle);// 设置默认选项

        tbody.append(row);
        // select2动态加元素需要刷新
        select2.selectpicker('render');
        select2.selectpicker("refresh");
    }

    function add_row_upload(serial_num,file_name,file_path,category) {
        var tbody = $("div#panel_upload table tbody");
        var row = $('<td>' +
                        '<input type="checkbox" data-file-path=' + file_path + '>' +
                    '</td>' +
                    '<td>'+ serial_num +'</td>' +
                    '<td> + file_name + </td>' +
                    '<td> + category + </td>');

        tbody.append(row);
    }

    function add_row_upd_rcd(serial_num,data_src,upd_time,type_num,brand_num,model_num,fingerprint_num) {
        var tbody = $("div#panel_upd_rcd table tbody");
        var row = $('<td>' +
                        '<input type="checkbox">' +
                    '</td>' +
                    '<td>' + serial_num + '</td>' +
                    '<td>' + data_src + '</td>' +
                    '<td>' + upd_time + '</td>' +
                    '<td>' + type_num + '</td>' +
                    '<td>' + brand_num + '</td>' +
                    '<td>' + model_num + '</td>' +
                    '<td>' + fingerprint_num + '</td>' +
                    '<td>' +
                        '<button type="button" class="btn btn-sm btn-primary">回退</button>' +
                    '</td>');

        tbody.append(row);
    }
</script>

{% endblock %}